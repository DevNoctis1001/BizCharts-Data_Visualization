<html>
  <head>
    <script src="//g.alicdn.com/bizcharts/io-asserts/3.1.2/react16.0.0.production.min.js"></script>
    <script src="//g.alicdn.com/bizcharts/io-asserts/3.1.2/react-dom16.0.0.production.min.js"></script>
	  <script type="text/javascript" src="//gw.alipayobjects.com/os/antv/assets/data-set/0.8.6/data-set.min.js"></script>
    <script src="//cdn.bootcss.com/babel-core/5.8.38/browser.min.js"></script>
    <script src="//g.alicdn.com/bizcharts/io-asserts/3.1.5/BizCharts.min.js"> </script>
    <script type="text/javascript" src="https://gw.alipayobjects.com/as/g/datavis/assets/1.0.1/jquery-3.2.1.min.js"></script>
    <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;height:100%;}</style>
  </head>
  <body>

   <div id="c1" ></div>
   <script type="text/babel">

    $.getJSON('/BizCharts/public/data/flare.json', data => {
      const { Chart, Axis, Geom, Tooltip, Facet, View, Legend, Label, Coord } = window.BizCharts;
        const dv = new DataSet.View().source(data, {
            type: 'hierarchy'
        });
        dv.transform({
            type: 'hierarchy.circle-packing',
        });
        const finalData = dv.getAllNodes().map(node => ({
            hasChildren: !!(node.data.children && node.data.children.length),
            name: node.data.name.split(/(?=[A-Z][^A-Z])/g).join('\n'),
            value: node.value,
            depth: node.depth,
            x: node.x,
            y: node.y,
            r: node.r
        })) 
        const diameter = Math.min(window.innerWidth, window.innerHeight) - 20;
        ReactDOM.render(
          <Chart  data={finalData} height={diameter} width={diameter} padding={0} >
            <Tooltip showTitle={false} />
            <Geom 
            type='point'
            position='x*y'
            shape='circle' 
            active={false} 
            size={['r', r => r * diameter]}
            style={{stroke: 'rgb(183, 55, 121)'}} 
            color={['r', 'rgb(252, 253, 191)-rgb(231, 82, 99)-rgb(183, 55, 121)']} 
            tooltip='name' 
            >
              <Label content='name' offset={0} textStyle={(text, item) => {
                    if (item.point.hasChildren) {
                        return {
                            opacity: 0
                        };
                    }
                    return {
                        textBaseline: 'middle',
                        fill: 'grey',
                        fontSize: 9,
                        textAlign: 'center'
                    };
                }} />
            </Geom>
          </Chart>, document.getElementById('c1')
        );
    });
    </script>
  </body>
</html>